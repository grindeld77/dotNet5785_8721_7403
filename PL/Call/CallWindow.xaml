<Window x:Class="PL.Call.CallWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PL.Call"
        Title="Call Details" Height="900" Width="700"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Loaded="Window_Loaded" Closed="Window_Closed">
    <Window.Resources>
        <!-- Style for Label -->
        <Style TargetType="Label" x:Key="LabelStyle">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#D32F2F"/>
            <Setter Property="Margin" Value="8,0,8,0"/>
        </Style>

        <!-- Style for ListView -->
        <Style TargetType="ListView" x:Key="StyledListView">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#D32F2F"/>
            <Setter Property="BorderThickness" Value="2"/>
        </Style>

        <!-- Style for GridView Columns -->
        <Style TargetType="GridViewColumnHeader" x:Key="GridViewColumnHeaderStyle">
            <Setter Property="Background" Value="#D32F2F"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Height" Value="50"/>
        </Style>

        <!-- Style for ComboBox -->
        <Style TargetType="ComboBox" x:Key="ComboBoxStyle">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#D32F2F"/>
            <Setter Property="BorderBrush" Value="#D32F2F"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Height" Value="40"/>
        </Style>

        <!-- TextBox Style -->
        <Style TargetType="TextBox" x:Key="TextBoxStyle">
            <Setter Property="FontSize" Value="18" />
            <Setter Property="Background" Value="White" />
            <Setter Property="Foreground" Value="#D32F2F" />
            <Setter Property="BorderBrush" Value="#D32F2F" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Padding" Value="6" />
            <Setter Property="Margin" Value="4" />
            <Setter Property="Height" Value="40" />
            <Setter Property="Width" Value="400" />
            <Setter Property="FontWeight" Value="Bold" />
        </Style>

        <!-- Button Style -->
        <Style TargetType="Button" x:Key="RoundedButtonStyle">
            <Setter Property="FontSize" Value="18" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Background" Value="#D32F2F" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderBrush" Value="#D32F2F" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Padding" Value="10" />
            <Setter Property="Margin" Value="8" />
            <Setter Property="Height" Value="40" />
            <Setter Property="Width" Value="180" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid Style -->
        <Style TargetType="DataGrid" x:Key="DataGridStyle">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#D32F2F"/>
            <Setter Property="BorderBrush" Value="#D32F2F"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="RowBackground" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#FFEBEE"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <!-- DataGrid Column Header Style -->
        <Style TargetType="DataGridColumnHeader" x:Key="DataGridColumnHeaderStyle">
            <Setter Property="Background" Value="#D32F2F"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Width" Value="80"/>
        </Style>

        <!-- Style for Titles -->
        <Style TargetType="TextBlock" x:Key="TitleStyle">
            <Setter Property="FontSize" Value="26"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#D32F2F"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
    </Window.Resources>
    <Grid>
        <StackPanel Margin="16" HorizontalAlignment="Center">
            <!-- header -->
            <TextBlock Text="Call Management" Style="{StaticResource TitleStyle}" />

            <!-- id -->
            <StackPanel Orientation="Horizontal" Margin="0,8" Visibility="{Binding IsDeleteButtonVisible}">
                <TextBlock Text="Call ID:" Width="90" VerticalAlignment="Center" FontSize="16" Foreground="#D32F2F" FontWeight="Bold"/>
                <TextBox Text="{Binding CurrentCall.Id, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" 
         IsReadOnly="True"  Style="{StaticResource TextBoxStyle}" />
            </StackPanel>

            <!-- call Description -->
            <StackPanel Orientation="Horizontal" Margin="0,8">
                <TextBlock Text="Description:" Width="90" FontSize="16" Foreground="#D32F2F" FontWeight="Bold" RenderTransformOrigin="0.451,0.839" Height="28"/>
                <TextBox Text="{Binding CurrentCall.Description}" Style="{StaticResource TextBoxStyle}" />
            </StackPanel>

            <!-- call type -->
            <StackPanel Orientation="Horizontal" Margin="0,8">
                <TextBlock Text="Type:" VerticalAlignment="Center" FontSize="16" Foreground="#D32F2F" FontWeight="Bold" Width="90" />
                <ComboBox ItemsSource="{Binding Source={StaticResource OpenCallCollectionTypeKey}}"
                          SelectedItem="{Binding CurrentCall.Type}"
                          Width="400" Style="{StaticResource ComboBoxStyle}" />
            </StackPanel>

            <!-- call address -->
            <StackPanel Orientation="Horizontal" Margin="0,8">
                <TextBlock Text="Address:" Width="90" VerticalAlignment="Center" FontSize="16" Foreground="#D32F2F" FontWeight="Bold"/>
                <TextBox Text="{Binding CurrentCall.FullAddress}" Style="{StaticResource TextBoxStyle}" />
            </StackPanel>

            <!-- open time -->
            <StackPanel Orientation="Horizontal" Margin="0,8">
                <TextBlock Text="Open Time:" Width="90" VerticalAlignment="Center" FontSize="16" Foreground="#D32F2F" FontWeight="Bold"/>
                <TextBox Text="{Binding CurrentCall.OpenTime}" IsReadOnly="True" Style="{StaticResource TextBoxStyle}" />
            </StackPanel>

            <!-- max end time -->
            <StackPanel Orientation="Horizontal" Margin="0,8">
                <TextBlock Text="End Time:" Width="90" FontSize="16" Foreground="#D32F2F" FontWeight="Bold" RenderTransformOrigin="0.5,0.833" Height="20"/>
                <TextBox Text="{Binding CurrentCall.MaxEndTime}" Style="{StaticResource TextBoxStyle}" />
            </StackPanel>

            <!-- call status -->
            <StackPanel Orientation="Horizontal" Margin="0,8">
                <TextBlock Text="Status:" Width="90" VerticalAlignment="Center" FontSize="16" Foreground="#D32F2F" FontWeight="Bold"/>
                <TextBox Text="{Binding CurrentCall.Status}" IsReadOnly="True" Style="{StaticResource TextBoxStyle}" />
            </StackPanel>

            <GroupBox Header="Assignments" Margin="0,16" FontSize="18" Foreground="#D32F2F" FontWeight="Bold"
          Height="180" Visibility="{Binding IsDeleteButtonVisible}">
                <DataGrid ItemsSource="{Binding CurrentCall.Assignments}" AutoGenerateColumns="False" CanUserAddRows="False" 
              Height="130" Style="{StaticResource DataGridStyle}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Volunteer ID" Binding="{Binding VolunteerId}" />
                        <DataGridTextColumn Header="Volunteer Name" Binding="{Binding VolunteerName}" />
                        <DataGridTextColumn Header="Start Time" Binding="{Binding StartTime}" />
                        <DataGridTextColumn Header="End Time" Binding="{Binding EndTime}" />
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" />
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>
            
            <!-- buttons area -->
            <StackPanel Orientation="Horizontal" Margin="0,16" HorizontalAlignment="Center" Height="90">
                <Button Content="{Binding ButtonText}" Margin="8" Click="SaveButton_Click" Style="{StaticResource RoundedButtonStyle}" />
                <Button Content="Cancel" Margin="8" Click="Cancel_Click" Style="{StaticResource RoundedButtonStyle}" />
                <Button Content="Delete" Margin="8" Click="DeleteButton_Click" Visibility="{Binding IsDeleteButtonVisible}" Style="{StaticResource RoundedButtonStyle}" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
